<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on 星期六, 十一月 01, 2008, 8:22 上午 -->
<!-- MuClient version 4.35 -->

<!-- Plugin "escape" generated by Plugin Wizard -->

<muclient>
<plugin
   name="escape"
   author="haha"
   id="4e38a3aade8c0892c5f19e86"
   language="Lua"
   save_state="n"
   date_written="2008-11-01 08:17:58"
   purpose="书剑农桑箭头破解插件"
   requires="4.35"
   version="1.0"
   >

</plugin>



<!--  Script  -->


<script>
<![CDATA[
local fix = ""
function OnPluginPacketReceived(text)
	local hex = fix .. utils.tohex(text)
	fix = ""
	hex = string.gsub(hex, "1B5B44", "5D") --left
	hex = string.gsub(hex, "1B5B43", "5B") --right
      --hex = string.gsub(hex, "1B5B42", "5B42")
      hex = string.gsub(hex, "1B5B41", "55")--up
      hex=string.gsub(hex,"0A","5E")
       hex=string.gsub(hex,"0D","5E")
	if string.sub(hex, string.len(hex) - 1, string.len(hex)) == "1B" then
		fix = "1B"
		hex = string.sub(hex, 0, string.len(hex) - 2)
	end
	if string.sub(hex, string.len(hex) - 3, string.len(hex)) == "1B5B" then
		fix = "1B5B"
		hex = string.sub(hex, 0, string.len(hex) - 4)
	end
	return utils.fromhex(hex)
end
]]>
</script>


</muclient>
